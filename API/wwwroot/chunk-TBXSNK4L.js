import{a as M,b as z}from"./chunk-6ZET53GP.js";import{b as N,c as O,f as y,i as F,k as u,m as Y,n as d,o as R,r as _,t as $,u as E,v as w,x as I,z as f}from"./chunk-2ZW3YYFG.js";import{a as D}from"./chunk-FFJ3ZTU4.js";import{b as T}from"./chunk-AJ5XW3XI.js";import{Ka as g,La as C,Ma as V,Oa as U,Pa as P,Qa as s,Ra as i,Sa as r,Ta as p,U as l,ab as v,cb as b,gc as k,gd as h,ic as S,na as a,qb as m,ra as G,rb as x,sb as j,va as c,xb as A}from"./chunk-YHFUIHAH.js";var q=class o{formBuilder=l(I);accountService=l(T);router=l(S);activatedRoute=l(k);returnUrl="/shop";constructor(){let t=this.activatedRoute.snapshot.queryParams.returnUrl;t&&(this.returnUrl=t)}loginForm=this.formBuilder.group({email:[""],password:[""]});onSubmit(){let t={email:this.loginForm.value.email,password:this.loginForm.value.password};this.accountService.login(t).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-30","p-7"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-5"],[1,"text-3xl","font-semibold"],["appearance","outline",1,"w-full","mb-5"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Your secure password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,n){e&1&&(i(0,"mat-card",0)(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email"),r(),p(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),r(),p(12,"input",6),r(),i(13,"button",7),m(14,"Sign in"),r()()()),e&2&&(a(),s("formGroup",n.loginForm))},dependencies:[f,_,F,d,R,E,w,D,y,M,N,h],encapsulation:2})};function W(o,t){if(o&1&&(i(0,"mat-error"),m(1),r()),o&2){let e=b();a(),j("",e.label," is required")}}function X(o,t){o&1&&(i(0,"mat-error"),m(1,"Email is invalid"),r())}var B=class o{constructor(t){this.controlDir=t;this.controlDir.valueAccessor=this}label="";type="text";writeValue(t){}registerOnChange(t){}registerOnTouched(t){}get control(){return this.controlDir.control}static \u0275fac=function(e){return new(e||o)(G(Y,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:8,consts:[["appearance","outline",1,"w-full","mb-5"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,n){e&1&&(i(0,"mat-form-field",0)(1,"mat-label"),m(2),r(),p(3,"input",1),g(4,W,2,1,"mat-error"),g(5,X,2,0,"mat-error"),r()),e&2&&(a(2),x(n.label),a(),s("type",A(n.type))("placeholder",A(n.label))("formControl",n.control),a(),C(n.control.hasError("required")?4:-1),a(),C(n.control.hasError("email")?5:-1))},dependencies:[f,F,d,$,y,M,O,N],encapsulation:2})};function Z(o,t){if(o&1&&(i(0,"li"),m(1),r()),o&2){let e=t.$implicit;a(),x(e)}}function ee(o,t){if(o&1&&(i(0,"div",8)(1,"ul",10),U(2,Z,2,1,"li",null,V),r()()),o&2){let e=b();a(2),P(e.validationErrors)}}var L=class o{formBuilder=l(I);accountService=l(T);router=l(S);snackbarService=l(z);validationErrors;registerForm=this.formBuilder.group({firstName:["",u.required],lastName:["",u.required],email:["",[u.required,u.email]],password:["",u.required]});onSubmit(){let t={firstName:this.registerForm.value.firstName,lastName:this.registerForm.value.lastName,email:this.registerForm.value.email,password:this.registerForm.value.password};this.accountService.register(t).subscribe({next:()=>{this.snackbarService.success("Registration successful!"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors=e})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-30","p-7"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-5"],[1,"text-3xl","font-semibold"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,n){e&1&&(i(0,"mat-card",0)(1,"form",1),v("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Register"),r()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),g(9,ee,4,0,"div",8),i(10,"button",9),m(11,"Register"),r()()()),e&2&&(a(),s("formGroup",n.registerForm),a(8),C(n.validationErrors?9:-1),a(),s("disabled",n.registerForm.invalid))},dependencies:[f,_,d,R,E,w,D,h,B],encapsulation:2})};var Me=[{path:"login",component:q},{path:"register",component:L}];export{Me as accountRoutes};
